use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize, sqlx::FromRow)]
pub struct DiaryEntry {
    pub diary_entry_id: String,
    pub entry_date: String,
    pub entry_year: i32,
    pub entry_month: i32,
    pub entry_day: i32,
    pub entry_week_of_year: i32,
    pub entry_day_of_week: i32,
    pub is_primary_page: bool,
    pub primary_page_id: Option<String>,
    pub is_auto_created: bool,
    pub auto_creation_reason: Option<String>,
    pub calendar_type: String,
    pub timezone_at_creation: Option<String>,
    pub date_locked: bool,
    pub date_last_validated_at: Option<i64>,
    pub parent_page_id: Option<String>,
    pub root_page_id: Option<String>,
    pub page_depth: i32,
    pub page_path: Option<String>,
    pub page_sort_index: i32,
    pub page_position_type: String,
    pub has_children: bool,
    pub children_count: i32,
    pub descendant_count: i32,
    pub is_collapsed_by_default: bool,
    pub is_archived: bool,
    pub is_deleted: bool,
    pub deleted_at: Option<i64>,
    pub deleted_reason: Option<String>,
    pub restore_parent_id: Option<String>,
    pub tree_version: i32,
    pub title: Option<String>,
    pub title_plaintext: Option<String>,
    pub content_json: String,
    pub content_plaintext: Option<String>,
    pub content_html_cache: Option<String>,
    pub block_count: i32,
    pub paragraph_count: i32,
    pub heading_count: i32,
    pub list_count: i32,
    pub code_block_count: i32,
    pub table_count: i32,
    pub toggle_count: i32,
    pub embed_count: i32,
    pub inline_comment_count: i32,
    pub content_schema_version: i32,
    pub last_block_edit_at: Option<i64>,
    pub word_count: i32,
    pub character_count: i32,
    pub sentence_count: i32,
    pub reading_time_minutes: i32,
    pub writing_time_seconds: i32,
    pub revision_count: i32,
    pub avg_words_per_paragraph: f64,
    pub is_empty_entry: bool,
    pub length_category: Option<String>,
    pub length_score: f64,
    pub last_length_change_at: Option<i64>,
    pub tag_ids: Option<String>,
    pub tag_names_cache: Option<String>,
    pub tag_count: i32,
    pub primary_category: Option<String>,
    pub secondary_categories: Option<String>,
    pub semantic_type: Option<String>,
    pub custom_labels: Option<String>,
    pub color_label: Option<String>,
    pub icon_emoji: Option<String>,
    pub importance_level: i32,
    pub confidence_level: i32,
    pub intent_type: Option<String>,
    pub mood_rating: Option<i32>,
    pub mood_label: Option<String>,
    pub energy_level: Option<i32>,
    pub stress_level: Option<i32>,
    pub sleep_quality: Option<i32>,
    pub weather_type: Option<String>,
    pub weather_temperature: Option<f64>,
    pub location_text: Option<String>,
    pub location_lat: Option<f64>,
    pub location_lng: Option<f64>,
    pub social_context: Option<String>,
    pub health_context_notes: Option<String>,
    pub gratitude_items: Option<String>,
    pub linked_habit_ids: Option<String>,
    pub completed_habit_ids: Option<String>,
    pub linked_goal_ids: Option<String>,
    pub progressed_goal_ids: Option<String>,
    pub linked_task_ids: Option<String>,
    pub linked_job_ids: Option<String>,
    pub linked_attachment_ids: Option<String>,
    pub backlink_page_ids: Option<String>,
    pub forward_link_page_ids: Option<String>,
    pub relation_strength_score: f64,
    pub is_counted_for_streak: bool,
    pub daily_streak_index: Option<i32>,
    pub is_streak_breaker: bool,
    pub yearly_day_index: Option<i32>,
    pub is_filled_day: bool,
    pub filled_day_score: f64,
    pub year_completion_percentage: f64,
    pub rolling_7_day_avg_words: f64,
    pub rolling_30_day_avg_words: f64,
    pub longest_streak_so_far: i32,
    pub current_streak_length: i32,
    pub streak_last_updated_at: Option<i64>,
    pub filter_date_bucket: Option<String>,
    pub filter_has_children: bool,
    pub filter_has_tags: bool,
    pub filter_length_bucket: Option<String>,
    pub filter_mood_bucket: Option<String>,
    pub sort_title_normalized: Option<String>,
    pub sort_date_numeric: Option<i64>,
    pub sort_last_edited_numeric: Option<i64>,
    pub created_at: i64,
    pub updated_at: i64,
    pub last_viewed_at: Option<i64>,
    pub created_by_profile_id: Option<String>,
    pub last_modified_by_profile_id: Option<String>,
    pub device_id: Option<String>,
    pub session_id: Option<String>,
    pub app_version_created: Option<String>,
    pub app_version_last_modified: Option<String>,
    pub content_hash: Option<String>,
    pub encryption_key_id: Option<String>,
    pub sync_state: Option<String>,
    pub conflict_state: Option<String>,
    pub conflict_resolved_at: Option<i64>,
    pub data_migration_version: i32,
    pub is_system_generated: bool,
    pub is_recovered_entry: bool,
    pub recovery_source: Option<String>,
    pub debug_notes: Option<String>,
    pub internal_flags: Option<String>,
    pub experimental_fields: Option<String>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct CreateDiaryInput {
    pub entry_date: String,
    pub title: Option<String>,
    pub content_json: String,
    pub parent_page_id: Option<String>,
}
